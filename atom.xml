<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://lyjhaha.github.io</id>
    <title>å“ˆåº“å‘ç›å¡”å¡”ğŸ“•</title>
    <updated>2020-02-04T13:04:50.590Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://lyjhaha.github.io"/>
    <link rel="self" href="https://lyjhaha.github.io/atom.xml"/>
    <subtitle>è¿™æ˜¯ä¸€ä¸ªå°åšå®¢</subtitle>
    <logo>https://lyjhaha.github.io/images/avatar.png</logo>
    <icon>https://lyjhaha.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, å“ˆåº“å‘ç›å¡”å¡”ğŸ“•</rights>
    <entry>
        <title type="html"><![CDATA[Djangoé¡¹ç›®éƒ¨ç½²]]></title>
        <id>https://lyjhaha.github.io/post/django-xiang-mu-bu-shu</id>
        <link href="https://lyjhaha.github.io/post/django-xiang-mu-bu-shu">
        </link>
        <updated>2020-02-04T12:52:58.000Z</updated>
        <summary type="html"><![CDATA[<p>ä½¿ç”¨uswgi+nginxéƒ¨ç½²Djangoé¡¹ç›®ï¼Œå¹¶å¼€å¯httpsè®¿é—®</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä½¿ç”¨uswgi+nginxéƒ¨ç½²Djangoé¡¹ç›®ï¼Œå¹¶å¼€å¯httpsè®¿é—®</p>
<!-- more -->
<h2 id="uwsgi">uwsgi</h2>
<ol>
<li>
<p>å®‰è£…ï¼š<code>pip install uwsgi</code></p>
</li>
<li>
<p>ç¼–å†™<code>uwsgi.ini</code></p>
<pre><code class="language-ini">[uwsgi]
# ä½¿ç”¨httpè®¿é—®çš„ç«¯å£å·ï¼Œä½¿ç”¨è¿™ä¸ªç«¯å£å·æ˜¯ç›´æ¥è®¿é—®äº†uwsgiï¼Œç»•è¿‡äº†nginx
# http = :9080
# ä¸å¤–ç•Œè¿æ¥çš„ç«¯å£å·ï¼Œnginxé€šè¿‡è¿™ä¸ªç«¯å£è½¬å‘ç»™uwsgi
socket = :9000
# æ˜¯å¦ä½¿ç”¨ä¸»çº¿ç¨‹
master = true
# é¡¹ç›®åœ¨æœåŠ¡å™¨ä¸­çš„ç›®å½•
chdir = /root/vguo/django_vguo
# Django wsgi ä½ç½®
wsgi-file = django_vguo/wsgi.py
# æœ€å¤§è¿›ç¨‹æ•°
processes = 4
# æ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹æ•°
threads = 2
# çŠ¶æ€ç›‘å¬ç«¯å£
stats = :9001
# é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ç¯å¢ƒé…ç½®
vacuum = true
# ç›®å½•ä¸‹æ–‡ä»¶æ”¹åŠ¨æ—¶è‡ªåŠ¨é‡å¯
touch-reload = /root/vguo/django_vguo
# Pythonæ–‡ä»¶æ”¹åŠ¨æ—¶è‡ªåŠ¨é‡å¯
py-auto-reload = 1
# åå°è¿è¡Œå¹¶å§æ—¥å¿—å­˜åˆ°.logæ–‡ä»¶
daemonize = /root/vguo/django_vguo/uwsgi.log

</code></pre>
<ol start="3">
<li>å¯åŠ¨ï¼š<code>uwsgi --ini -d uwsgi.ini</code></li>
</ol>
</li>
</ol>
<h2 id="nginx">nginx</h2>
<ol>
<li>
<p>ç¼–å†™<code>etc/nginx/conf.d/vguo.conf</code></p>
<pre><code>upstream django {
        server 127.0.0.1:9000;
}

server {
        listen 443;
        server_name vguo.lyjcloud.com;
        ssl on;

        ssl_certificate cert/vguo.lyjcloud.com.pem;
        ssl_certificate_key cert/vguo.lyjcloud.com.key;
        ssl_session_timeout 5m;
        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_prefer_server_ciphers on;

        location / {
                uwsgi_pass      django;
                include         /etc/nginx/uwsgi_params;
        }
}
</code></pre>
</li>
<li>
<p>é‡å¯nginx<code>nginx -s reload</code></p>
</li>
</ol>
]]></content>
    </entry>
</feed>